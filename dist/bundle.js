async function load(path,into){var res=await fetch(path);if(res=await res.text(),into){var el=html(into,res);qa("script",el,(function(script){script.loaded||(script.loaded=!0,eval(script.textContent))}))}return res}function sleep(e,t=.5){return new Promise((e=>setTimeout(e,1e3*t)))}function clearErrors(e){var t=q(`.${e.name}-errors`,e.parentNode);t&&(t.style.opacity=0,setTimeout((function(){text(t,""),t.style.opacity=1}),210))}function showErrors(e,t={}){if(e.error){for(var n in t=Object.assign({class:"error"},t),qa("form em",(function(e){text(e,"")})),flash(e.error.message,t),e)if("error"!==n)for(var r in e[n])text(`.${r}-errors`,e[n][r][0]);return!0}}function goBack(){history.go(-(store("root")||1))}function navCount(e){if(!e)return store("root",null),void store("last",null);var t=location.pathname,n=store("last");n&&n==t||store("root",(store("root")||0)+1),store("last",t)}function isImage(e){return/\.(gif|jpe?g|tiff|png|bmp|svg)$/i.test(e)}function closeWindow(e){"Escape"==e.code&&goBack()}function tr(e="",t=32){return e.length>t?e.substring(0,t).trim()+" ...":e}function toggleVisibility(e={},t){var n=e.pub||"public",r=e.priv||"private",o="."+n+",."+r,i=cookie(e.cookie||"session"),a=t||function(e){var t=e.classList.contains(n),o=e.classList.contains(r);(i&&t||!i&&o)&&(e.style.display="none")};document.querySelectorAll(o).forEach(a)}function setActiveLink(e={}){document.querySelectorAll(e.selector||"a").forEach((function(t){t.pathname==location.pathname&&t.classList.add(e.active||"active")}))}function handleLogout(e={},t){var n=e.cookie||"session";cookie(n)&&cookie(n,null),t&&t()}function handleToggleMenu(){q("#main-menu",(e=>e.classList.toggle("open")))}function handleCloseMenus(e){e.stopPropagation();for(var t,n=e.target;n;){if(n.classList.contains("open"))return;var r=n.getAttribute("data-toggle");if(r){t=q(r);break}n=n.parentElement}qa(".open",(e=>{e!=t&&e.classList.remove("open")}))}window.q=function(e,t,n){return"function"==typeof t&&(n=t,t=void 0),"string"==typeof e&&(e=(t&&q(t)||document).querySelector(e)),"function"==typeof n&&n(e,t),e},window.qa=function(e,t,n){"function"==typeof t&&(n=t,t=void 0);var r=(t&&q(t)||document).querySelectorAll(e);if("function"==typeof n)for(var o=0;o<r.length;o++)n(r[o],t);return r},window.esc=function(e){var t=document.createElement("p");return t.textContent=e,t.innerHTML},window.raw=function(e){var t=document.createElement("p");return t.innerHTML=e,t.textContent},window.css=function(e,t){var n=q(e);if(!n)return null;if("string"==typeof t){if(!(t.indexOf(":")>-1))return n.style[t];n.style.cssText=t}else for(var r in t)n.style[r]=t[r];return n},window.html=function(e,t,n){var r=q(e);return r?void 0===t?r.innerHTML:(n?"r"==n[0]?r.outerHTML=t:r.insertAdjacentHTML(("b"==n[0]?"beforebegin":"a"==n[0]&&"afterend")||"t"==n[0]&&"afterbegin"||"e"==n[0]&&"beforeend",t):r.innerHTML=t,r):null},window.text=function(e,t){var n=q(e);return n?void 0===t?n.textContent:(n.textContent=t,n):null},window.attr=function(e,t,n){var r=q(e);if(!r)return null;if("string"==typeof t){if(void 0===n)return r.getAttribute(t);r.setAttribute(t,n)}else for(var o in t)null==t[o]?r.removeAttribute(o):r.setAttribute(o,t[o]);return r},window.time=function(e,t){if(!e)return"";"string"==typeof e&&(e=new Date(e)),t||(t={});var n=new Intl.DateTimeFormat(t.lang||"en",t),r=t.format;if(r){var o={};return n.formatToParts(e).forEach((function(e){o[e.type]=e.value})),(r.match(/%[A-z]+/gi)||[]).forEach((function(e){var t=e.slice(1).toLowerCase(),n=o[t];n&&("string"==typeof n&&/[A-Z]/.test(e[1])&&(n=n[0].toUpperCase()+n.slice(1)),r=r.replace(e,n))})),r}return n.format(e)},window.params=function(e){if(null==e)return"";if("string"!=typeof e)return e=parseInt(e||0)+1,location.pathname.split("/")[e];e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null!=t?decodeURIComponent(t[1].replace(/\+/g," ")):""},window.cookie=function(e,t,n){if(void 0===t)return(t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)"))?decodeURIComponent(t[2]):null;n||(n={}),null===t&&(t="",n.days=-1);var r=n.days||30,o=n.path||"/",i=n.domain?";domain="+n.domain:"",a=n.sameSite||"Lax",s=n.httpOnly?";HttpOnly":"",l=n.secure?";Secure":"",u=new Date;u.setTime(u.getTime()+864e5*r),document.cookie=e+"="+encodeURIComponent(t)+";path="+o+i+";expires="+u.toUTCString()+";SameSite="+a+s+l},window.store=function(e,t){function n(){var t=sessionStorage.getItem(e);if(null!=t)return JSON.parse(t)}if(!e)return sessionStorage.clear();if(null===t){var r=n();return sessionStorage.removeItem(e),r}return null!=t?(sessionStorage.setItem(e,JSON.stringify(t)),t):n()},window.serialize=function(e){if(!(e=q(e)))return{};var t={};function n(e){var t=e.value||e.getAttribute("data-default");if(null!=t){var n=e.getAttribute("data-type")||e.type;if("array"==n)return"[]"==t?[]:t.split(",").map((e=>e.trim()));if("number"==n)return+t;if("date"==n){var r=Date.parse(t)||(new Date).getTime();return new Date(r)}return"bool"==n?!(["false","0","off"].indexOf(t)>-1)&&!!t:t}}for(var r=0;r<e.elements.length;r++){var o=e.elements[r];if(o.name&&!o.disabled&&["file","reset","submit","button"].indexOf(o.type)<0)if("select-multiple"==o.type){for(var i=0,a=[];i<o.options.length;i++){var s=o.options[i];s.selected&&a.push(n(s))}t[o.name]=a}else if("checkbox"==o.type){var l=o.name;t[l]||(t[l]=[]),o.checked&&t[l].push(n(o))}else if("radio"!=o.type||o.checked){var u=n(o);void 0!==u&&(t[o.name]=u)}}return t},window.flash=function(e,t){t||(t={});var n=q(t.el||"#flash"),r=t.time||5e3,o=t.name||"flash";return n?(void 0!==window.__$flash&&clearTimeout(window.__$flash),e=(e||cookie(o)||"").trim(),cookie(o,null),0!=t.scroll&&scroll(0,0),t.class&&n.classList.add(t.class),n.textContent=e,n.style.opacity=1,r&&(window.__$flash=setTimeout((function(){n.style.opacity=0,t.class&&n.classList.remove(t.class)}),r)),n):null},window.waveorb=function(e){return function(t,n,r){return function(e,t,n){return new Promise((function(r,o){n||(n={}),t||(t={});var i,a=new XMLHttpRequest;if(a.addEventListener("load",(function(){var e=JSON.parse(a.responseText);r(e)})),a.addEventListener("error",(function(){o(a)})),a.open(n.method||"POST",e+(n.path||"")),n.files){for(var s in i=new FormData,t)i.append(s,JSON.stringify(t[s]));for(var l of n.files)i.append("file",l,l.name);n.progress&&a.upload.addEventListener("progress",(function(e){e.percent=(e.loaded/e.total*100).toFixed(2),n.progress(e)}))}else a.setRequestHeader("Content-Type","application/json; charset=utf-8");if(n.headers)for(var s in n.headers)a.setRequestHeader(s,n.headers[s]);a.withCredentials=!0,a.send(i||JSON.stringify(t))}))}(e+t,n||{},r||{})}};
//# sourceMappingURL=bundle.js.map